<!--一部海老沼が仮で作っていますｶﾘｶﾘ　129行-->


@page "/IriTome/MainFragment"

@using Microsoft.AspNetCore.Components;

<!DOCTYPE HTML>
<html lang="ja">

<head>
    <meta charset="Shift-JIS" />
    <meta http-equiv="content-language" content="ja" />
    <meta name="google" content="notranslate" />

    <style>
        @* bootstrapのスタイルを上書き *@ @* (ヘッダー下の空白を無くす) *@
        .mb-3 { margin-bottom: 0.5rem; }

        @* _Layoutの背景色等を上書き *@
        .BackGr {
            background: #80989b;
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;
            
        }

        .Btn-Color{
            background-color: #ffffff;
        }

        .Margin_Bottom{
            margin-bottom: 2rem;
        }

        .btn-IriButton {
            border-radius: 0;
            background-color: #ffffff;
        }
            .btn-IriButton:not(:disabled):not(.disabled):active,
            .btn-IriButton:not(:disabled):not(.disabled).active,
            .show > .btn-menu.dropdown-toggle {
                
            }

        .btn-TomeButton {
            border-radius: 0;
            background-color: #ffffff;
        }

            .btn-IriButton:not(:disabled):not(.disabled):active,
            .btn-IriButton:not(:disabled):not(.disabled).active,
            .show > .btn-menu.dropdown-toggle {
            }



    </style>


</head>

<body class="Bg_Color">
    <table class="Card_table_Fixed Margin_Bottom Bg_Color">
        <tr>

            <td colspan="10">

                <!--未定-->
                @*
        <div class="dropdown">
            <button type="button" id="Kuiki"
                    class="btn btn-secondary btn-block dropdown-toggle"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false">
                @Kuiki_SelectValue 区
            </button>
            <div class="dropdown-menu" aria-labelledby="Kuiki">

                @foreach (var Kuiki in IriKuiki)
                {

                    if (Y == Kuiki.KuikiNo)
                    {

                    }
                    else
                    {

                        <a @onclick="@(s => OnChangeEventKuiki(Kuiki.KuikiNo))" class="dropdown-item form-control" value="@Kuiki.KuikiNo"> @Kuiki.KuikiNo 区 </a>
                        //Y = Kuiki.KuikiNo;

                    }

                }
            </div>
        </div>
                *@



                
        <form>
            <select name="Kuiki" class="form-control" @onchange="@OnChangeEventKuikiX">

                @foreach (var x in Kuiki)
                {
                        <option value="@int.Parse(x.ToString())"> @x 区 </option>
                }
            </select>
        </form>
                
            </td>

            <td>&nbsp;</td>

            <td colspan="10">


                <!--未定-->
                @*
            <div class="dropdown">
                <button type="button" id="Nengetsu"
                        class="btn btn-secondary btn-block dropdown-toggle"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false">
                    @SelectValue
                </button>
                <div class="dropdown-menu" aria-labelledby="Nengetu">
                    @foreach (var Nengetu in NengetuList)
                    {

                        <a @onclick="@(s => OnChangeEventNengetu(Nengetu.dispNengetu))" class="dropdown-item form-control" value="@Nengetu.dispNengetu"> @Nengetu.dispNengetu </a>
                    }
                </div>
            </div>
                *@
                <form>
                    <select name="Nengetsu" class="form-control" @onchange="@OnChangeEventNengetuX">
                        <option value=null>全期間</option>
                        @foreach (var Nengetu in NengetuList)
                        {
                            <option value="@Nengetu.nengetu"> @Nengetu.dispNengetu </option>
                        }
                    </select>
                </form>
            </td>
        </tr>
        </table>





        <div>

            @* 年月リストの表示（セレクトリスト） *@
                @* @onchange : クラスから処理を呼び出せる *@
                @* select内で設定したoptionのvalueを引数として持たせることが出来る *@


                @*
        <p>@SelectedValue</p>

        @if (SelectedFlg == true)
        {<p>選択されたの @SelectValue です</p>}
                *@

                @* 区域リストの表示（セレクトリスト） *@

                @*
        <select onchange="OnChangeEventKuiki">
            @foreach (var item in Model.KuikiList)
            {
                <option value=@item.kuiki>@item.name</option>
            }
        </select>
                *@

        </div>

                @* 取得した読者のリストを展開 *@
                @*
        @foreach (var item in Model.DokusyaList)
        {
            // 区域と順路の切り抜き処理
            string kuiki = "";
            string jun = "";

            // 読者リストがnullではないかの判定
            if (item != null)
            {
                // 区域の後ろに「区」を追加
                kuiki = item.kuiki + "区";

                // 順路の「.」を判定して前後で切り抜きを行い、間に「-」を挿入する。
                // また、頭の0詰めを無くす
                // 例） 「0001.00」 → 「1-00」

                // 2020/10/01 藤原 upd
                // もしも順路内に「.」が存在しない場合は、そのまま表示させる
                if (item.junro.IndexOf('.') == -1)
                {
                    jun = item.junro;
                }
                else
                {
                    jun = item.junro.Substring(0, item.junro.IndexOf('.')).TrimStart('0')
                    + "-" +
                    item.junro.Substring(item.junro.LastIndexOf('.') + 1);
                }
            }

            <a asp-page="./Detail" asp-route-id="@item.dokuCode" type="button" class="search-btn btn btn-outline-dark btn-block">
                <span class="Kuiki">@kuiki</span>
                <span class="Junro">@jun</span>
                <span class="dokuCode">No.@Html.DisplayFor(modelItem => item.dokuCode)</span>
                <span class="Name">@Html.DisplayFor(modelItem => item.name)</span>
                <br />
                <span class="address">@Html.DisplayFor(modelItem => item.addressRyaku)</span>
                <span class="Banti">@Html.DisplayFor(modelItem => item.banti)</span>
                <span class="Build">@Html.DisplayFor(modelItem => item.build)</span>
                <br />
                <span class="Tel">@Html.DisplayFor(modelItem => item.tel)</span>
            </a>
        }
                *@

                <!--デモ用に海老沼が仮で作りましたｶﾘｶﾘ-->
                <div class="Bg_Color">
                    <table class="Card_table_Fixed Bg_Color">

                        <!--入止ボタンで画面いっぱいに表示-->

                        <tr align="center">
                            @if (Phase1Data.IriActive == true)
                            {
                                <th colspan="10">
                                    <button @onclick="@(s => ButtonActive("Iri"))" type="button" class="btn btn-primary btn-block  " >
                                    @*<button @onclick="IriButtonActive" type="button" class="btn btn-primary btn-block">*@
                                        <table class="Card_table_Fixed">
                                            <tr>
                                                <th colspan="2">入</th>
                                                <th colspan="2">@IriCount 件</th>
                                            </tr>
                                        </table>
                                    </button>
                                </th>
                            }

                            @if (Phase1Data.IriActive == true && Phase1Data.TomeActive == true)
                            {

                                <th>&nbsp;</th>

                            }


                            @if (Phase1Data.TomeActive == true)
                            {
                                <th colspan="10">
                                    <button @onclick="@(s =>ButtonActive("Tome"))" type="button" class="btn btn-danger btn-block">
                                    @*<button @onclick="TomeButtonActive" type="button" class="btn btn-danger btn-block">*@
                                        <table class="Card_table_Fixed">
                                            <tr>
                                                <th colspan="2">止</th>
                                                <th colspan="2">@TomeCount 件</th>
                                            </tr>
                                        </table>
                                    </button>
</th>
                            }
                        </tr>

                        <!--入止ボタンで画面いっぱいに表示-->


                        <tr>
                            @if (Phase1Data.IriActive == true)
                            {
                                <th class="Card_VerticalFix Card_parent" colspan="10">
                                    <table class="Card_table_Fixed">
                                        <!--foreath-->
                                        @foreach (var x in C_IriList)
                                        {

                                            
                                            @if( Kuiki_SelectValue == x.Kuiki && 
                                                ( SelectValue == x.iri || SelectValue == null ) )
                                            { 
                                            <tr>
                                                <td>
                                                    <div class="Card_parent">
                                                        <button @onclick="@(s => JumpPageIri(x))" type="button" class="btn btn-IriButton btn-block Card_NameButtonMargin">
                                                            @*JumpPage("./Common/DokusyaActivity")*@
                                                            <table class="Card_table_Fixed">
                                                                <tbody>
                                                                    <tr>
                                                                        <td align="left" class="fontSizeMAX767" colspan="5">@x.Name &nbsp;</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="left" class="fontSizeMAX767" colspan="5">@x.Meig &nbsp;</td>

                                                                    </tr>
                                                                    <tr>
                                                                        <td align="left" class="fontSizeMAX767" colspan="4">@x.iri - @x.Tome  &nbsp;</td>
                                                                            
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </button>
                                                        @*<button type="button" class="btn btnW btn bg-success Card_NameButtonMarginChild Card_fontSizeMAX767 Card_child">訪</button>*@
                                                        @*@onclick="@(s => JumpPage("./Common/Meet"))"*@
                                                    </div>
                                                </td>
                                            </tr>
                                            }
                                        }
                                        <!--foreathEnd-->
                                    </table>
                                </th>
                            }


                            @if (Phase1Data.IriActive == true && Phase1Data.TomeActive == true)
                            {
                                <th colspan="1">&nbsp;</th>
                            }

                            @if (Phase1Data.TomeActive == true)
                            {
                                <th class="Card_VerticalFix Card_parent" colspan="10">
                                    <table class="Card_table_Fixed">
                                        <!--foreath-->
                                        @foreach (var x in C_TomeList)
                                        {
                                            @if ( Kuiki_SelectValue == x.Kuiki )
                                                /*&& 
                                                (SelectValue -1 == x.KeiyakuEd  || SelectValue == null))
                                             */
                                             {

                                                <tr>
                                                    <td>
                                                        <div class="Card_parent">
                                                            <button @onclick="@(s => JumpPageTome(x))" type="button" class="btn btn-TomeButton btn-block Card_NameButtonMargin">
                                                            
                                                            @*JumpPage("./Common/DokusyaActivity")*@
                                                            <table>
                                                                <tbody>
                                                                    <tr>
                                                                        <td align="left" class="fontSizeMAX767" colspan="5">@x.Name &nbsp;</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="left" class="fontSizeMAX767" colspan="5">@x.Meig &nbsp;</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="left" class="fontSizeMAX767" colspan="4">@x.iri - @x.tome &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            </button>
                                                            @*<button  type="button" class="btn btnW bg-success Card_NameButtonMarginChild Card_fontSizeMAX767 Card_child">訪</button> 訪問ボタン *@
                                                            @*@onclick="@(s => JumpPage("./Common/Meet"))"*@
                                                        </div>
                                                    </td>
                                                </tr>
                                             }
                                         }
                                            <!--foreathEnd-->
                                        </table>
                                </th>
                            }
                        </tr>

                    </table>
                </div>
    </body>
</html>


@*
    @functions {

        void OnChangeEventNengetu(ChangeEventArgs e)
        {
            Model.KeepNengetu = e.Value.ToString();

            // 読者情報の取得(読者番号:完全一致）
            Model.IriList = Model.RtnIriList();

            Model.TomeList = Model.RtnTomeList();
        }

        void OnChangeEventKuiki(ChangeEventArgs e)
        {
            Model.KeepKuiki = e.Value.ToString();

            // 読者情報の取得(読者番号:完全一致）
            Model.IriList = Model.RtnIriList();

            Model.TomeList = Model.RtnTomeList();
        }


    }

*@

